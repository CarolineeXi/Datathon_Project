---
title: "Datathon"
author: "CH"
date: "2024-05-18"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(dplyr)
library(skimr)
library(mice)
```


```{r}
data <- read.csv("Drug_overdose_death_rates__by_drug_type__sex__age__race__and_Hispanic_origin__United_States_20240518.csv")
skim(data)

# Visualize the pattern of missing values
aggr(data, col = c('navyblue', 'red'), numbers = TRUE, sortVars = TRUE, labels = names(data), cex.axis = 0.7, gap = 3, ylab = c("Missing data", "Pattern"))
```
We see there is no duplicate rows and Estimate has 1111 missing values, which is 17.84% of the total data.

Cleaning Data:

We already have some numeric variables for levels of category variables, so we decided to delete the category variables. Also, we dropped the Flag variable since it's not critical for analysis. For the missing value in Estimate, we replace them by using Multiple Imputation.

```{r,include=FALSE}
data <- data %>% select(-INDICATOR, -PANEL, -UNIT, -STUB_NAME, -STUB_LABEL, -AGE, -FLAG)

#Multiple Imputation using mice
imputed_data <- mice(data, m = 5, method = 'pmm', seed = 500)
complete_data <- complete(imputed_data, 1)
```